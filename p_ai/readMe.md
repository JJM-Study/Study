# 프로젝트 개요

본 프로젝트는 Spring Boot, Flask, React를 활용하여 ChatBot 시스템을 구축한 실전형 풀스택 프로젝트로서, AWS + Jenkins 기반 CI/CD 파이프라인을 직접 구성하고, WebSocket을 활용한 실시간 데이터 처리 및 JWT 인증 구조까지 포함. 
설계 → 개선 → 배포 전반을 직접 경험하며 시스템적 설계와 보안, 비용 최적화까지 폭넓게 다룸.

(사소한 시행착오 및 개선 과정은 `docs/` 디렉토리에 정리할 것.)

## 주요 내용

- **초기 설계에서 유지된 요소**
- **초기 설계와 개선 과정**
- **향후 개선 계획**
- **프로젝트에서 배운 점**
- **결론**

---

## 초기 설계에서 유지된 요소

초기 설계에서 변하지 않은 핵심 개념으로, 이후 개선 과정에서도 유지됨.

- **API 간 역할 분리 및 통신 구조 유지**
  - Spring Boot: 데이터베이스 연동 및 주요 백엔드 역할
  - Flask API: Python 기반 AI 모델 학습 및 서빙 전담
  - 프론트엔드: React로 변경되었으나, 전체적인 역할 분담은 유지

- **JWT 인증 및 보안 구조 유지**
  - Spring Security 기반 JWT 인증 구조 설계 후 유지

---

## 초기 설계와 개선 과정

### 프론트엔드

| 초기 설계 | 개선 후 | 개선 이유 |
|----------|--------|----------|
| Thymeleaf 기반 SSR | React 기반의 CSR | UX 및 확장성을 고려 |

#### 주요 개선 사례

- **프론트엔드 마이그레이션**
  - **초기 설계**: Thymeleaf 기반 서버 렌더링
  - **개선 후**: React로 전환, WebSocket을 통한 실시간 데이터 갱신
  - **결과**: 백엔드와의 독립성 확보, 유지보수 및 확장성 증가

### 배포 구조

| 초기 설계 | 개선 후 | 개선 이유 |
|----------|--------|----------|
| 단일 서버 배포 | Flask와 Spring Boot는 EC2 배포, React는 CloudFront 분리 배포 | 서버 부하 감소, 운영 관리 용이 |
| RDS 퍼블릭 IP 사용 | EC2를 경유한 터널링 방식으로 전환 | 보안 강화, VPC 요금 절감 |
| HTTP 배포 | HTTPS 배포 | 보안 및 최신 브라우저 호환성 확보 |

#### 주요 개선 사례

- **배포를 위한 API 구조 개선**
  - **초기 설계**: 프론트엔드와 Flask API, Spring Boot가 동일 최상위 루트를 공유
  - **개선 후**: React, Flask, Spring Boot를 각각 독립적으로 배포
  - **결과**: 배포 과정 단순화 및 운영 관리 용이

- **EC2와 CloudFront를 활용한 배포**
  - **초기 설계**: 모든 요소를 EC2에 배포하려 했으나, 부하 문제 발생
  - **개선 후**: S3 버킷에 정적 파일 업로드 후 CloudFront 배포
  - **결과**: 성능 최적화 및 보안 강화

- **RDS 터널링 시도**
  - **초기 설계**: RDS 퍼블릭 IP 직접 사용 → 비용 및 보안 문제 발생
  - **개선 후**: 로컬 환경에서는 SSL 터널링, 배포 환경에서는 EC2를 통한 접근
  - **결과**: 보안 강화 및 비용 절감

### Flask API

| 초기 설계 | 개선 후 | 개선 이유 |
|----------|--------|----------|
| 채팅 중 실시간 학습 | 모델 학습 엔드포인트 분리, 사전 학습된 pickle 파일 사용 | 데이터 오염 및 서버 부하 고려 |

#### 주요 개선 사례

- **실시간 학습에서 수동 학습 방식으로 변경**
  - **초기 설계**: 채팅 입력 시마다 자동 학습 → 데이터 품질 저하 및 서버 부하 증가
  - **개선 후**: 모델 학습 엔드포인트 분리 및 사전 학습된 pickle 파일 사용
  - **결과**: 데이터 품질 유지 및 서버 부하 감소

### Spring Boot

| 초기 설계 | 개선 후 | 개선 이유 |
|----------|--------|----------|
| Controller가 모든 요청 처리 | API Controller 추가하여 REST API 전담, 기존 Controller는 페이지 매핑 전담 | 역할 분리로 유지보수성 및 확장성 향상 |
| 질문과 답변을 개별 관리 | AI_QandA 엔티티 추가, @OneToMany 및 @ManyToOne 명확화 | 데이터 조회 및 관계 관리 용이 |
| Service에서 DB 연산, Flask API 호출, DTO 변환까지 모두 처리 | 역할별 메서드 분리 (getAnswersFromPython(), handleQuestion() 등) | 단일 책임 원칙(SRP) 적용, 유지보수성 향상 |
| WebSocket에서 사용자 인증 없이 메시지를 브로드캐스트 | JWT 기반 인증 + 특정 사용자에게만 메시지 전송 | 보안 강화 및 불필요한 메시지 전송 방지 |

#### 주요 개선 사례

- **WebSocket 사용자 인증 및 메시지 전송 개선**
  - **초기 설계**: 인증 없이 메시지 브로드캐스트
  - **개선 후**: JWT 기반 인증 적용 및 특정 사용자에게만 메시지 전송
  - **결과**: 보안 강화 및 불필요한 메시지 전송 방지

---

## 향후 개선 계획

- **OAuth2 기반 로그인 기능 도입**
  - 기존 JWT 인증에서 OAuth2 기반 인증으로 확장
  - 소셜 로그인 (Google, Kakao 등) 및 자체 인증 시스템 구축
  - 보안 강화 및 인증 확장성 확보

- **RestTemplate → WebClient 리팩토링**
  - 확장성 및 유연성을 위한 리팩토링
  - 예외 상황 대응 (타임아웃, 오류 응답 처리) 구조 개선 포함

- **SSL 인증 방식 개선**
  - Let's Encrypt 활용 인증에서 CloudFlare SSL 인증 방식으로 전환

- **Redis를 활용한 캐싱 적용**
  - 데이터베이스 부하 최적화

- **JWT 인증 구조 개선**
  - 단일 컴포넌트에서 Context 기반 전역 인증 관리 체계로 수정

- **Refresh Token 추가**
  - 주기적인 재발급을 통한 보안 강화.

- **fallback 미처리 항목 개선**
  - 예: 모델이 유사도를 기준으로 판단할 수 없을 경우, '답변할 수 없음' 반환 추가 등

---

## 프로젝트에서 배운 점

- **유지보수성을 고려한 설계의 중요성**
  - 역할 분리를 고려한 것이 유지보수와 확장에 큰 도움이 됨

- **배포 환경을 고려한 설계 필요성**
  - 단일 EC2 배포에서 분리형 배포로 변경하여 운영 관리 용이성 증대
  - RDS 퍼블릭 IP 사용을 지양하여 보안 강화 및 비용 절감

- **프론트엔드와 백엔드 분리의 이점**
  - React 도입 후 유지보수성 향상
  - API 중심 개발 구조 도입으로 확장성과 독립성 확보

- **실시간 학습보다는 안정적인 데이터 관리가 중요**
  - 실시간 학습이 데이터 품질 저하를 유발하여, 사전 학습된 모델을 활용하는 것이 효과적임

- **클라우드 비용 최적화의 필요성**
  - 무료 티어 내에서 최적화하면서 성능과 비용의 균형을 맞추는 것이 중요함

- **보안 강화를 위한 조치**
  - CORS 규약, JWT, 스프링 시큐리티 필터 체인 및 NGINX를 통한 리버스 프록시와 라우팅, HTTPS 리디렉트, SSL 인증과 터널링 및 인바운드 설정 등
    전반적인 보안 역량을 향상시키면서, 보안의 중요성을 상기 할 수 있었음.


- **DevOps 및 CI/CD 자동화의 중요성**
  - Jenkins + Nexus를 활용한 CI/CD 구축이 배포 자동화에서 핵심적인 역할을 한다는 점을 체감.
  - AWS 비용 절감 및 최적화 전략을 고민하면서 클라우드 운영에 대한 실무 경험을 쌓을 수 있었음.

---

## 결론

- 설계 단계에서 유지보수성과 확장성을 고려하는 것이 중요하다.
- 배포 환경에서 발생할 수 있는 이슈를 미리 예상하고 대비해야 한다.
- 프론트엔드와 백엔드를 분리하여 API 기반 구조로 만들면 확장성과 독립성이 증가한다.
- 실시간 학습을 제거하고 사전 학습된 모델을 활용하는 방식이 데이터 품질과 성능 유지에 효과적이다.
- 보안 강화를 위한 WebSocket 인증, HTTPS 적용, RDS 터널링 등의 다양한 실습을 하고, 중요성을 체감할 수 있었다.
- CI/CD를 구축하여 배포 자동화를 경험하면서 DevOps적인 역량을 키울 수 있었다.
- 클라우드 환경에서의 비용 최적화도 중요한 고려 요소임을 직접 경험하였다.
